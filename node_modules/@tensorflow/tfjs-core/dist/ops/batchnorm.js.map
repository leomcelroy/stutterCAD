{"version":3,"file":"batchnorm.js","sourceRoot":"","sources":["../../src/ops/batchnorm.ts"],"names":[],"mappings":"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"}