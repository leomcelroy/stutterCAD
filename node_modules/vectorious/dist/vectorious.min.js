!function i(u,o,s){function h(e,t){if(!o[e]){if(!u[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(f)return f(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var a=o[e]={exports:{}};u[e][0].call(a.exports,function(t){return h(u[e][1][t]||t)},a,a.exports,i,u,o,s)}return o[e].exports}for(var f="function"==typeof require&&require,t=0;t<s.length;t++)h(s[t]);return h}({1:[function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=t("./vector"),a=function(){function c(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.type=Float64Array,this.shape=[],t&&t.buffer&&t.buffer instanceof ArrayBuffer?c.fromTypedArray(t,e&&e.shape):t instanceof Array?c.fromArray(t):t instanceof f?c.fromVector(t,e&&e.shape):t instanceof c?c.fromMatrix(t):"number"==typeof t&&"number"==typeof e?c.fromShape([t,e]):t&&!t.buffer&&t.shape?c.fromShape(t.shape):void 0}var t,e,r;return t=c,r=[{key:"fromTypedArray",value:function(t,e){if(t.length!==e[0]*e[1])throw new Error("Shape does not match typed array dimensions.");var r=Object.create(c.prototype);return r.shape=e,r.data=t,r.type=t.constructor,r}},{key:"fromArray",value:function(t){var e,r,n=t.length,a=t[0].length,i=new Float64Array(n*a);for(e=0;e<n;++e)for(r=0;r<a;++r)i[e*a+r]=t[e][r];return c.fromTypedArray(i,[n,a])}},{key:"fromMatrix",value:function(t){var e=Object.create(c.prototype);return e.shape=[t.shape[0],t.shape[1]],e.data=new t.type(t.data),e.type=t.type,e}},{key:"fromVector",value:function(t,e){if(e&&t.length!==e[0]*e[1])throw new Error("Shape does not match vector dimensions.");var r=Object.create(c.prototype);return r.shape=e||[t.length,1],r.data=new t.type(t.data),r.type=t.type,r}},{key:"fromShape",value:function(t){var e=t[0],r=t[1];return c.fromTypedArray(new Float64Array(e*r),t)}},{key:"binOp",value:function(t,e,r){return new c(t).binOp(e,r)}},{key:"add",value:function(t,e){return new c(t).add(e)}},{key:"subtract",value:function(t,e){return new c(t).subtract(e)}},{key:"product",value:function(t,e){return new c(t).product(e)}},{key:"scale",value:function(t,e){return new c(t).scale(e)}},{key:"fill",value:function(t,e,r,n){if(t<=0||e<=0)throw new Error("invalid size");r=r||0;var a,i,u=new(n=n||Float64Array)(t*e),o="function"==typeof r,s=0;for(a=0;a<t;a++)for(i=0;i<e;i++,s++)u[s]=o?r(a,i):r;return c.fromTypedArray(u,[t,e])}},{key:"zeros",value:function(t,e,r){return c.fill(t,e,0,r)}},{key:"ones",value:function(t,e,r){return c.fill(t,e,1,r)}},{key:"random",value:function(t,e,r,n,a){return r=r||1,n=n||0,c.fill(t,e,function(){return r*Math.random()+n},a)}},{key:"multiply",value:function(t,e){return t.multiply(e)}},{key:"plu",value:function(t){return new c(t).plu()}},{key:"augment",value:function(t,e){return new c(t).augment(e)}},{key:"identity",value:function(t,e){return c.fill(t,t,function(t,e){return t===e?1:0})}},{key:"magic",value:function(t,e){if(t<0)throw new Error("invalid size");function r(t,e,r){return(e+2*r+1)%t}var n,a,i=new(e=e||Float64Array)(t*t);for(n=0;n<t;n++)for(a=0;a<t;a++)i[(t-n-1)*t+(t-a-1)]=r(t,t-a-1,n)*t+r(t,a,n)+1;return c.fromTypedArray(i,[t,t])}},{key:"equals",value:function(t,e){return t.equals(e)}},{key:"rank",value:function(t){return new c(t).rank()}}],(e=[{key:"binOp",value:function(t,e){var r,n=this.shape[0],a=this.shape[1],i=n*a,u=this.data,o=t.data;if(n!==t.shape[0]||a!==t.shape[1])throw new Error("sizes do not match!");for(r=0;r<i;r++)u[r]=e(u[r],o[r],r);return this}},{key:"add",value:function(t){return this.binOp(t,function(t,e){return t+e})}},{key:"subtract",value:function(t){return this.binOp(t,function(t,e){return t-e})}},{key:"product",value:function(t){return this.binOp(t,function(t,e){return t*e})}},{key:"scale",value:function(t){var e,r=this.shape[0]*this.shape[1],n=this.data;for(e=0;e<r;e++)n[e]*=t;return this}},{key:"multiply",value:function(t){var e=this.shape[0],r=this.shape[1],n=t.shape[0],a=t.shape[1],i=this.data,u=t.data;if(r!==n)throw new Error("sizes do not match");var o,s,h,f,l=new this.type(e*a);for(o=0;o<e;o++)for(s=0;s<a;s++){for(h=f=0;h<r;h++)f+=i[o*r+h]*u[s+h*a];l[o*a+s]=f}return c.fromTypedArray(l,[e,a])}},{key:"transpose",value:function(){var t,e,r=this.shape[0],n=this.shape[1],a=new this.type(n*r);for(t=0;t<r;t++)for(e=0;e<n;e++)a[e*r+t]=this.data[t*n+e];return c.fromTypedArray(a,[n,r])}},{key:"inverse",value:function(){var t=this.shape[0],e=this.shape[1];if(t!==e)throw new Error("invalid dimensions");var r,n,a=c.identity(t),i=c.augment(this,a).gauss(),u=c.zeros(t,e),o=c.zeros(t,e),s=i.shape[1];for(r=0;r<t;r++)for(n=0;n<s;n++)n<e?u.set(r,n,i.get(r,n)):o.set(r,n-t,i.get(r,n));if(!u.equals(c.identity(t)))throw new Error("matrix is not invertible");return o}},{key:"gauss",value:function(){var t,e,r,n,a,i=this.shape[0],u=this.shape[1],o=new c(this),s=0;for(e=0;e<i;e++){if(u<=s)return new Error("matrix is singular");for(r=e;0===o.data[r*u+s];)if(i===++r&&(r=e,u===++s))return new Error("matrix is singular");if(o.swap(e,r),0!==(t=o.data[e*u+s]))for(n=0;n<u;n++)o.data[e*u+n]=o.data[e*u+n]/t;for(r=0;r<i;r++)if(a=o.data[r*u+s],r!==e)for(n=0;n<u;n++)o.data[r*u+n]=o.data[r*u+n]-o.data[e*u+n]*a;s++}for(e=0;e<i;e++){for(r=t=0;r<u;r++)t||(t=o.data[e*u+r]);if(t)for(n=0;n<u;n++)o.data[e*u+n]=o.data[e*u+n]/t}return o}},{key:"lu",value:function(){var t,e,r=this.shape[0],n=this.shape[1],a=c.plu(this),i=a[1],u=(c.identity(r),new c(a[0])),o=new c(a[0]);for(t=0;t<r;t++)for(e=t;e<n;e++)u.data[t*n+e]=t===e?1:0;for(t=0;t<r;t++)for(e=0;e<t&&e<n;e++)o.data[t*n+e]=0;return[u,o,i]}},{key:"plu",value:function(){var t,e,r,n,a,i,u,o=this.data,s=this.shape[0],h=new Int32Array(s);for(u=0;u<s;++u){for(n=u,t=Math.abs(o[u*s+u]),i=u+1;i<s;++i)t<(e=Math.abs(o[i*s+u]))&&(t=e,n=i);for((h[u]=n)!==u&&this.swap(u,n),r=o[u*s+u],a=u+1;a<s;++a)o[a*s+u]/=r;for(a=u+1;a<s;++a){for(i=u+1;i<s-1;++i)o[a*s+i]-=o[a*s+u]*o[u*s+i],o[a*s+ ++i]-=o[a*s+u]*o[u*s+i];i===s-1&&(o[a*s+i]-=o[a*s+u]*o[u*s+i])}}return[this,h]}},{key:"lusolve",value:function(t,e){var r,n,a,i=this.data,u=t.shape[0],o=t.shape[1],s=t.data;for(r=0;r<e.length;r++)r!==e[r]&&t.swap(r,e[r]);for(a=0;a<o;a++){for(r=0;r<u;r++)for(n=0;n<r;n++)s[r*o+a]-=i[r*u+n]*s[n*o+a];for(r=u-1;0<=r;r--){for(n=r+1;n<u;n++)s[r*o+a]-=i[r*u+n]*s[n*o+a];s[r*o+a]/=i[r*u+r]}}return t}},{key:"solve",value:function(t){var e=c.plu(this),r=e[0],n=e[1];return r.lusolve(new c(t),n)}},{key:"augment",value:function(t){if(0===t.shape.length)return this;var e,r,n=this.shape[0],a=this.shape[1],i=t.shape[0],u=t.shape[1],o=this.data,s=t.data;if(n!==i)throw new Error("Rows do not match.");var h=a+u,f=new this.type(h*n);for(e=0;e<n;e++)for(r=0;r<a;r++)f[e*h+r]=o[e*a+r];for(e=0;e<i;e++)for(r=0;r<u;r++)f[e*h+r+a]=s[e*u+r];return this.shape=[n,h],this.data=f,this}},{key:"diag",value:function(){var t,e=this.shape[0],r=this.shape[1],n=new this.type(Math.min(e,r));for(t=0;t<e&&t<r;t++)n[t]=this.data[t*r+t];return new f(n)}},{key:"determinant",value:function(){if(this.shape[0]!==this.shape[1])throw new Error("matrix is not square");var t,e=c.plu(this),r=e.pop(),n=e.pop(),a=this.shape[0],i=this.shape[1],u=1,o=1;for(t=0;t<a;t++)t!==r[t]&&(o*=-1);for(t=0;t<a;t++)u*=n.data[t*i+t];return o*u}},{key:"trace",value:function(){var t,e,r=this.diag(),n=0;for(t=0,e=r.length;t<e;t++)n+=r.get(t);return n}},{key:"equals",value:function(t){var e,r=this.shape[0],n=this.shape[1],a=r*n,i=this.data,u=t.data;if(r!==t.shape[0]||n!==t.shape[1]||this.type!==t.type)return!1;for(e=0;e<a;e++)if(i[e]!==u[e])return!1;return!0}},{key:"check",value:function(t,e){if(Number.isNaN(t)||Number.isNaN(e)||t<0||e<0||t>this.shape[0]-1||e>this.shape[1]-1)throw new Error("index out of bounds")}},{key:"get",value:function(t,e){return this.check(t,e),this.data[t*this.shape[1]+e]}},{key:"set",value:function(t,e,r){return this.check(t,e),this.data[t*this.shape[1]+e]=r,this}},{key:"swap",value:function(t,e){if(t<0||e<0||t>this.shape[0]-1||e>this.shape[0]-1)throw new Error("index out of bounds");var r=this.shape[1],n=this.data.slice(t*r,(t+1)*r);return this.data.copyWithin(t*r,e*r,(e+1)*r),this.data.set(n,e*r),this}},{key:"map",value:function(t){var e,r=this.shape[0],n=this.shape[1],a=r*n,i=new c(this),u=i.data;for(e=0;e<a;e++)u[e]=t.call(i,u[e],e/n|0,e%n,u);return i}},{key:"each",value:function(t){var e,r=this.shape[0],n=this.shape[1],a=r*n;for(e=0;e<a;e++)t.call(this,this.data[e],e/n|0,e%n);return this}},{key:"reduce",value:function(t,e){var r=this.shape[0],n=this.shape[1],a=r*n;if(0===a&&!e)throw new Error("Reduce of empty matrix with no initial value.");for(var i=0,u=e||this.data[i++];i<a;i++)u=t.call(this,u,this.data[i],i/n|0,i%n);return u}},{key:"rank",value:function(){var t,e,r,n,a,i,u=this.toArray().map(function(t){return new f(t)}),o=this.shape[0],s=this.shape[1],h=0;for(t=0;t<o-1;t++){for(n=null,e=t;e<o;e++)if(u[t].get(t)){t!==e&&(r=u[t],u[t]=u[e],u[e]=r),n=u[t];break}if(n)for(e=t+1;e<o;e++)i=(a=u[e]).get(t)/n.get(t),u[e]=a.subtract(n.scale(i))}for(t=0;t<o;t++)for(e=0;e<s;e++)if(u[t].get(e)){h++;break}return h}},{key:"toString",value:function(){var t,e=[],r=this.shape[0],n=this.shape[1];for(t=0;t<r;t++)e.push("["+this.data.subarray(t*n,(t+1)*n).toString()+"]");return"["+e.join(", \n")+"]"}},{key:"toArray",value:function(){var t,e=[],r=this.shape[0],n=this.shape[1];for(t=0;t<r;t++)e.push(Array.prototype.slice.call(this.data.subarray(t*n,(t+1)*n)));return e}},{key:"T",get:function(){return this.transpose()}}])&&n(t.prototype,e),r&&n(t,r),c}();e.exports=a;try{window.Matrix=a}catch(t){}},{"./vector":2}],2:[function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function f(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),this.type=Float64Array,this.length=0,t instanceof f?this.combine(t):t&&t.shape?(this.data=new t.type(t.data),this.length=t.shape[0]*t.shape[1],this.type=t.type):t instanceof Array?(this.data=new this.type(t),this.length=t.length):t&&t.buffer&&t.buffer instanceof ArrayBuffer&&(this.data=t,this.length=t.length,this.type=t.constructor)}var t,e,r;return t=f,r=[{key:"binOp",value:function(t,e,r){return new f(t).binOp(e,r)}},{key:"add",value:function(t,e){return new f(t).add(e)}},{key:"subtract",value:function(t,e){return new f(t).subtract(e)}},{key:"scale",value:function(t,e){return new f(t).scale(e)}},{key:"normalize",value:function(t){return new f(t).normalize()}},{key:"project",value:function(t,e){return t.project(new f(e))}},{key:"fill",value:function(t,e,r){if(t<0)throw new Error("invalid size");if(0===t)return new f;null==e&&(e=0),null==r&&(r=Float64Array);var n,a=new r(t);if("function"==typeof e)for(n=0;n<t;n++)a[n]=e(n);else for(n=0;n<t;n++)a[n]=e;return new f(a)}},{key:"zeros",value:function(t,e){return f.fill(t,0,e)}},{key:"ones",value:function(t,e){return f.fill(t,1,e)}},{key:"random",value:function(t,e,r,n){return null==e&&(e=1),null==r&&(r=0),f.fill(t,function(){return e*Math.random()+r},n)}},{key:"range",value:function(){var t,e,r,n=[].slice.call(arguments),a=!1,i=Float64Array;switch("function"==typeof n[n.length-1]&&(i=n.pop()),n.length){case 2:r=n.pop(),e=1,t=n.pop();break;case 3:r=n.pop(),e=n.pop(),t=n.pop();break;default:throw new Error("invalid range")}if(r-t<0){var u=r;r=t,t=u,a=!0}if(r-t<e)throw new Error("invalid range");var o=new i(Math.ceil((r-t)/e)),s=t,h=0;if(a)for(;s<r;s+=e,h++)o[h]=r-s+t;else for(;s<r;s+=e,h++)o[h]=s;return new f(o)}},{key:"dot",value:function(t,e){return t.dot(e)}},{key:"angle",value:function(t,e){return t.angle(e)}},{key:"equals",value:function(t,e){return t.equals(e)}},{key:"combine",value:function(t,e){return new f(t).combine(e)}}],(e=[{key:"binOp",value:function(t,e){var r,n=this.length,a=t.length;if(n!==a)throw new Error("sizes do not match!");if(!n&&!a)return this;for(r=0;r<n;r++)this.data[r]=e(this.data[r],t.data[r],r);return this}},{key:"add",value:function(t){return this.binOp(t,function(t,e){return t+e})}},{key:"subtract",value:function(t){return this.binOp(t,function(t,e){return t-e})}},{key:"scale",value:function(n){return this.each(function(t,e,r){r[e]*=n})}},{key:"normalize",value:function(){return this.scale(1/this.magnitude())}},{key:"project",value:function(t){return t.scale(this.dot(t)/t.dot(t))}},{key:"dot",value:function(t){if(this.length!==t.length)throw new Error("sizes do not match");var e,r,n=this.data,a=t.data,i=0;for(e=0,r=this.length;e<r;e++)i+=n[e]*a[e];return i}},{key:"magnitude",value:function(){if(!this.length)return 0;var t,e,r=0,n=this.data;for(t=0,e=this.length;t<e;t++)r+=n[t]*n[t];return Math.sqrt(r)}},{key:"angle",value:function(t){return Math.acos(this.dot(t)/this.magnitude()/t.magnitude())}},{key:"equals",value:function(t){if(this.length!==t.length)return!1;for(var e=0;e<this.length&&this.data[e]===t.data[e];)e++;return e===this.length}},{key:"min",value:function(){return this.reduce(function(t,e){return t<e?t:e},Number.POSITIVE_INFINITY)}},{key:"max",value:function(){return this.reduce(function(t,e){return t<e?e:t},Number.NEGATIVE_INFINITY)}},{key:"check",value:function(t){if(!Number.isFinite(t)||t<0||t>this.length-1)throw new Error("index out of bounds")}},{key:"get",value:function(t){return this.check(t),this.data[t]}},{key:"set",value:function(t,e){return this.check(t),this.data[t]=e,this}},{key:"combine",value:function(t){if(!t.length)return this;if(!this.length)return this.data=new t.type(t.data),this.length=t.length,this.type=t.type,this;var e=this.length,r=t.length,n=this.data,a=t.data,i=new this.type(e+r);return i.set(n),i.set(a,e),this.data=i,this.length=e+r,this}},{key:"push",value:function(t){return this.combine(new f([t]))}},{key:"map",value:function(t){var e,r=new f(this),n=r.data;for(e=0;e<this.length;e++)n[e]=t.call(r,n[e],e,n);return r}},{key:"each",value:function(t){var e;for(e=0;e<this.length;e++)t.call(this,this.data[e],e,this.data);return this}},{key:"reduce",value:function(t,e){var r=this.length;if(0===r&&!e)throw new Error("Reduce of empty matrix with no initial value.");for(var n=0,a=null!=e?e:this.data[n++];n<r;n++)a=t.call(this,a,this.data[n],n,this.data);return a}},{key:"toString",value:function(){var t=["["],e=0;for(e<this.length&&t.push(this.data[e++]);e<this.length;)t.push(", "+this.data[e++]);return t.push("]"),t.join("")}},{key:"toArray",value:function(){return this.data?[].slice.call(this.data):[]}},{key:"x",get:function(){return this.get(0)},set:function(t){return this.set(0,t)}},{key:"y",get:function(){return this.get(1)},set:function(t){return this.set(1,t)}},{key:"z",get:function(){return this.get(2)},set:function(t){return this.set(2,t)}},{key:"w",get:function(){return this.get(3)},set:function(t){return this.set(3,t)}}])&&n(t.prototype,e),r&&n(t,r),f}();e.exports=a;try{window.Vector=a}catch(t){}},{}]},{},[2,1]);